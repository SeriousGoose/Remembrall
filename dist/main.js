(()=>{"use strict";let e,t,n,l,o,a,c,i,r,d,s,m,u=document.createElement("div"),g=localStorage.getItem("classArray"),y=localStorage.getItem("categoryNames"),p=localStorage.getItem("allToDos"),f=localStorage.getItem("toDoId");function E(){let e=new Date,t=[];remembrall.style.color="white";for(let e=0;e<r.length;e++)for(let n=0;n<r[e][1].length;n++)""!=r[e][1][n].date&&t.push(new Date(r[e][1][n].date));0==t.every((function(t){return t.getTime()+72e4*t.getTimezoneOffset()>=e.getTime()}))&&(remembrall.style.color="red")}function h(){m.sort(((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())),r.forEach((e=>e[1].sort(((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()))))}document.addEventListener("click",(()=>{e=JSON.stringify(r),t=JSON.stringify(d),l=JSON.stringify(s),n=JSON.stringify(m),localStorage.setItem("classArray",e),localStorage.setItem("categoryNames",t),localStorage.setItem("allToDos",n),localStorage.setItem("toDoId",l)}));class v{constructor(e,t,n,l,o){this.title=e,this.description=t,this.category=n,this.date=l,this.id=o}}function C(e){let t=!0,n=document.createElement("div");if(n.classList.add("toDoItems"),""!=e.title){let l=document.createElement("div");n.appendChild(l),toDoList.appendChild(n);let o=document.createElement("button");o.textContent="Complete",l.appendChild(o);let a=document.createElement("div");a.textContent=e.title,n.appendChild(a);let c=document.createElement("button");c.textContent="+ Show Details",l.append(c);let i=document.createElement("div");if(""!=e.date){let t=document.createElement("div");t.textContent="Due Date: "+e.date,i.appendChild(t)}if("default"!=e.category){let t=document.createElement("div");t.textContent="Category: "+e.category,i.appendChild(t)}if(""!=e.description){let t=document.createElement("div");t.textContent="Description: "+e.description,i.appendChild(t)}c.addEventListener("click",(()=>{1==t?(t=!1,c.textContent="-Hide Details",n.appendChild(i)):0==t&&(t=!0,c.textContent="+ Show Details",n.removeChild(i))})),o.addEventListener("click",(()=>{var t,l;console.log(r),l=e,(t=n).addEventListener("click",(()=>{t.innerHTML="",t.style.display="flex",t.style.justifyContent="space-evenly";let e=document.createElement("div");e.innerHTML="Task Completed?",t.appendChild(e);let n=document.createElement("button");n.textContent="Yes",t.appendChild(n);let o=document.createElement("button");o.textContent="No",t.appendChild(o),n.addEventListener("click",(()=>{t.remove(),r.forEach((e=>e[1].forEach((t=>function(e,t){if(console.log(r),t.id==l.id){console.log(e.indexOf(t));let n=e.indexOf(t);e.splice(n,1),m=[],r.forEach((e=>e[1].forEach((e=>m.push(e)))))}}(e[1],t))))),E()})),o.addEventListener("click",(()=>{toDoList.innerHTML="",m.forEach((e=>C(e)))}))}))}))}}function L(e){let t=document.createElement("div");t.classList.add("categoryItems"),t.style.justifyContent="space-between",catList.appendChild(t);let n=document.createElement("div");if(n.classList.add("categoryNames"),n.textContent=e,t.appendChild(n),"default"!=e){let n=document.createElement("button");n.classList.add("categoryRemove"),n.textContent="-",t.appendChild(n),n.addEventListener("click",(()=>{var n,l;l=e,(n=t).addEventListener("click",(()=>{n.innerHTML="",n.style.display="flex",n.style.justifyContent="space-evenly";let e=document.createElement("div");e.innerHTML="Remove Category?",n.appendChild(e);let t=document.createElement("button");t.textContent="Yes",n.appendChild(t);let o=document.createElement("button");o.textContent="No",n.appendChild(o),t.addEventListener("click",(()=>{n.remove();for(let e=0;e<r.length;e++)r[e][0]==l&&(r.splice(e,1),catList.innerHTML="",toDoList.innerHTML="",r.forEach((e=>e[1].forEach((e=>C(e))))),r.forEach((e=>L(e[0])))),E()})),o.addEventListener("click",(()=>{catList.innerHTML="",r.forEach((e=>L(e[0])))}))}))}))}n.addEventListener("click",(()=>{k();for(let t=0;t<r.length;t++)r[t][0]==e&&(toDoList.innerHTML="",r[t][1].forEach((e=>C(e))))}))}function S(e){let t=document.createElement("option");t.classList.value=e,t.textContent=e,itemClass.appendChild(t)}function T(){modal.style.display="none",categoryModal.style.display="none"}function D(){u.classList.add("categoryItems"),u.textContent="Show All",catList.prepend(u)}function I(){u.style.display="none"}function k(){u.style.display="block"}null==g&&(e=JSON.stringify([["default",[]]]),localStorage.setItem("classArray",e)),null==y&&(t=JSON.stringify([]),localStorage.setItem("categoryNames",t)),null==p&&(n=JSON.stringify([]),localStorage.setItem("allToDos",n)),null==f&&(l=JSON.stringify(1),localStorage.setItem("toDoId",l)),o=JSON.parse(localStorage.getItem("classArray")),a=JSON.parse(localStorage.getItem("categoryNames")),c=JSON.parse(localStorage.getItem("allToDos")),i=JSON.parse(localStorage.getItem("toDoId")),r=o,d=a,s=i,m=c,document.querySelectorAll("div").forEach((e=>{document.getElementById("element")})),document.querySelectorAll("input").forEach((e=>{document.getElementById("element")})),document.querySelectorAll("button").forEach((e=>{document.getElementById("element")})),document.querySelectorAll("select").forEach((e=>{document.getElementById("element")})),formSubmit.addEventListener("click",(()=>{let e=new v(title.value,description.value,itemClass.value,date.value,s);if(""!=e.title)return r.forEach((t=>{e.category==t[0]&&t[1].push(e)})),m=[],r.forEach((e=>e[1].forEach((e=>m.push(e))))),newForm.reset(),h(),toDoList.innerHTML="",m.forEach((e=>C(e))),T(),E(),console.log(r),s++})),newToDo.addEventListener("click",(()=>{modal.style.display="inline"})),formCancel.addEventListener("click",(()=>{newForm.reset(),T()})),addCategory.addEventListener("click",(()=>{categoryModal.style.display="inline"})),categorySubmit.addEventListener("click",(()=>{if(""!=categoryTitle.value&&function(e){d=[];for(let e=0;e<r.length;e++){let t=r[e][0];d.push(t)}return d.every((t=>t!=e))}(categoryTitle.value)){let e=categoryTitle.value;r.push([e,[]])}newCategory.reset(),catList.innerHTML="",D(),I(),r.forEach((e=>L(e[0]))),itemClass.innerHTML="",r.forEach((e=>S(e[0]))),categoryModal.style.display="none"})),categoryCancel.addEventListener("click",(()=>{newCategory.reset(),T()})),T(),D(),k(),I(),u.addEventListener("click",(()=>{I(),h(),toDoList.innerHTML="",m.forEach((e=>C(e))),T()})),E(),null!=m&&m.forEach((e=>C(e))),null!=r&&(r.forEach((e=>L(e[0]))),r.forEach((e=>S(e[0]))))})();